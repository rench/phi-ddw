<!doctype html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta http-equiv="Content-Language" content="en" />
    <meta name="msapplication-TileColor" content="#2d89ef">
    <meta name="theme-color" content="#4188c9">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <link rel="icon" href="/favicon.ico" type="image/x-icon"/>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <title>Phi-DDW Explorer - by github.com/rench - a responsive, flat and full featured admin template</title>
    <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,300i,400,400i,500,500i,600,600i,700,700i&amp;subset=latin-ext">
    <script src="/assets/js/require.min.js"></script>
    <script>
      requirejs.config({
          baseUrl: '.'
      });
    </script>
    <!-- Dashboard Core -->
    <link href="/assets/css/dashboard.css" rel="stylesheet" />
    <script src="/assets/js/dashboard.js"></script>
    <!-- c3.js Charts Plugin -->
    <link href="/assets/plugins/charts-c3/plugin.css" rel="stylesheet" />
    <script src="/assets/plugins/charts-c3/plugin.js"></script>
    <!-- Input Mask Plugin -->
    <script src="/assets/plugins/input-mask/plugin.js"></script>
    <script src="/assets/js/timeago.min.js"></script>
    <script src="/assets/js/dateformat-min.js"></script>
  </head>
  <body class="">
    <div class="page">
      <div class="page-main">
        <div class="header py-4">
          <div class="container">
            <div class="d-flex">
              <a class="header-brand" href="/index">
                <span>Phi-DDW</span>
              </a>
              <div class="d-flex order-lg-2 ml-auto">
                <div class="nav-item d-none d-md-flex">
                  <a href="https://github.com/rench/phi-ddw" class="btn btn-sm btn-outline-primary" target="_blank">Source Code</a>
                </div>
              <a href="#" class="header-toggler d-lg-none ml-3 ml-lg-0" data-toggle="collapse" data-target="#headerMenuCollapse">
                <span class="header-toggler-icon"></span>
              </a>
            </div>
          </div>
        </div>
        <div class="header collapse d-lg-flex p-0" id="headerMenuCollapse">
          <div class="container">
            <div class="row align-items-center">
              <div class="col-lg-3 ml-auto">
                <form class="input-icon my-3 my-lg-0">
                  <input type="search" class="form-control header-search" placeholder="Search&hellip;" tabindex="1">
                  <div class="input-icon-addon">
                    <i class="fe fe-search"></i>
                  </div>
                </form>
              </div>
              <div class="col-lg order-lg-first">
                <ul class="nav nav-tabs border-0 flex-column flex-lg-row">
                  <li class="nav-item">
                    <a href="#" class="nav-link active"><i class="fe fe-home"></i>Home</a>
                  </li>
                  <li class="nav-item">
                    <a href="#" class="nav-link"><i class="fe fe-box"></i>Blocks</a>
                  </li>
                  <li class="nav-item">
                    <a href="#" class="nav-link"><i class="fe fe-calendar"></i>Transactions</a>
                  </li>
                  <li class="nav-item">
                    <a href="#" class="nav-link"><i class="fe fe-file-text"></i>Address</a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="my-3 my-md-5">
          <div class="container">
            <div class="page-header">
              <h1 class="page-title">
                Overview
              </h1>
            </div>
            <div class="row row-cards">
              <div class="col-6 col-sm-4 col-lg-2">
                <div class="card">
                  <div class="card-body p-3 text-center">
                    <div class="h1 m-0" id="ddw-address">-</div>
                    <div class="text-muted mb-4">DDW-Address</div>
                  </div>
                </div>
              </div>
              <div class="col-6 col-sm-4 col-lg-2">
                <div class="card">
                  <div class="card-body p-3 text-center">
                    <div class="h1 m-0" id="ddw-transaction">-</div>
                    <div class="text-muted mb-4">DDW-Transaction</div>
                  </div>
                </div>
              </div>
              <div class="col-6 col-sm-4 col-lg-2">
                <div class="card">
                  <div class="card-body p-3 text-center">
                    <div class="h1 m-0" id="ddw-block">-</div>
                    <div class="text-muted mb-4">DDW-Block</div>
                  </div>
                </div>
              </div>
              <div class="col-6 col-sm-4 col-lg-2">
                <div class="card">
                  <div class="card-body p-3 text-center">
                    <div class="h1 m-0" id="ddw-address-7day">-</div>
                    <div class="text-muted mb-4">7 day DDW-Address</div>
                  </div>
                </div>
              </div>
              <div class="col-6 col-sm-4 col-lg-2">
                <div class="card">
                  <div class="card-body p-3 text-center">
                    <div class="h1 m-0" id="ddw-transaction-7day">-</div>
                    <div class="text-muted mb-4">7 day DDW-Transaction</div>
                  </div>
                </div>
              </div>
              <div class="col-6 col-sm-4 col-lg-2">
                <div class="card">
                  <div class="card-body p-3 text-center">
                    <div class="h1 m-0" id="ddw-block-7day">-</div>
                    <div class="text-muted mb-4">7 day DDW-Block</div>
                  </div>
                </div>
              </div>
            </div>
            <div class="row row-cards row-deck">
              <div class="col-sm-9 col-lg-6">
                <div class="card">
                  <div class="card-header">
                    <h4 class="card-title">Latest 10 Address</h4>
                  </div>
                  <table class="table card-table" id="latest-address">
                    <!--
                    <tr>
                      <td width="1"><i class="fa fa-chrome text-muted"></i></td>
                      <td>0x2ed45602e79cdbeaa6f0016e20dedccb739780ea</td>
                      <td class="text-right"><span class="text-muted">800000199894</span></td>
                    </tr>
                    -->
                  </table>
                </div>
              </div>
              <div class="col-md-9 col-lg-6">
                <div class="card">
                  <div class="card-header">
                    <h3 class="card-title">Latest 10 Block</h3>
                  </div>
                  <div class="card-body o-auto" style="height: 15rem">
                    <ul class="list-unstyled list-separated" id="latest-block">
                      <!--
                      <li class="list-separated-item">
                        <div class="row align-items-center">
                          <div class="col" style="overflow: hidden;text-overflow: ellipsis;white-space: nowrap;">
                            <div>
                              <a href="./tx.html" class="text-inherit">0x0e45076da12e32464f700f89dcc754dfdc1cd938746156aeda2b004164f2a856</a>
                            </div>
                          </div>
                          <div class="col-auto">
                              <span class="badge badge-success">2</span>
                            </div>
                        </div>
                      </li>
                      -->
                    </ul>
                  </div>
                </div>
              </div>
              <div class="col-12">
                <div class="card">
                  <div class="card-header">
                    <h3 class="card-title">Block & Transaction</h3>
                  </div>
                  <div class="table-responsive">
                    <table class="table card-table table-vcenter text-nowrap">
                      <thead>
                        <tr>
                          <th class="w-1">Block</th>
                          <th>From</th>
                          <th>To</th>
                          <th>Value</th>
                          <th>Timestamp</th>
                          <th>Status</th>
                        </tr>
                      </thead>
                      <tbody id="latest-transaction">
                        <!--
                        <tr>
                          <td>
                            <span class="text-muted">
                              <a href="/block/90416" class="text-inherit">
                                90416
                              </a>
                            </span>
                          </td>
                          <td><a href="/address/0x93c73652638dacd1d93d76c8fe9deecf85854a5d" class="text-inherit">0x93c73652638dacd1d93d76c8fe9deecf85854a5d</a></td>
                          <td>
                            <a href="/address/0x5fed14f10d6c3deef4bda0df5029dc29f3cd3ad0" class="text-inherit">0x5fed14f10d6c3deef4bda0df5029dc29f3cd3ad0</a>
                          </td>
                          <td>
                            1266.6676
                          </td>
                          <td>
                            2018-04-06 13:32:00
                          </td>
                          <td>
                            <span class="status-icon bg-success"></span> SUCCESS
                          </td>
                        </tr>
                        -->
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="footer">
        <div class="container">
          <div class="row">
            <div class="col-lg-8">
              <div class="row">
                <div class="col-6 col-md-3">
                  <ul class="list-unstyled mb-0">
                    <li><a href="http://www.phicomm.com/cn/index.php/Products/none_details.html">Phi-DDW Products</a></li>
                  </ul>
                </div>
              </div>
            </div>
            <div class="col-lg-4 mt-4 mt-lg-0">
              Phi-DDW BlockChain Explorer
            </div>
          </div>
        </div>
      </div>
      <footer class="footer">
        <div class="container">
          <div class="row align-items-center flex-row-reverse">
            <div class="col-auto ml-lg-auto">
              <div class="row align-items-center">
                <div class="col-auto">
                  <a href="https://github.com/rench/phi-ddw" class="btn btn-outline-primary btn-sm">phi-ddw Source code</a>
                </div>
                <div class="col-auto">
                  <a href="https://github.com/tabler/tabler" class="btn btn-outline-primary btn-sm">Tabler Source code</a>
                </div>
              </div>
            </div>
            <div class="col-12 col-lg-auto mt-3 mt-lg-0 text-center">
              Copyright © 2018 <a href=".">Phi-DDW</a>. Theme by Tabler All rights reserved.
            </div>
          </div>
        </div>
      </footer>
    </div>
  </body>
  <script>
    require(["jquery"],function($){
      $(document).ready(function() {
        //-- load summary
        $.ajax({
            url:"/api/statistics/summary"
            ,dataType:"json"
            ,success: function(data){
                $('#ddw-address').html(data.address)
                $('#ddw-block').html(data.block)
                $('#ddw-transaction').html(data.transaction)
                $('#ddw-address-7day').html(data.address7Day)
                $('#ddw-block-7day').html(data.block7Day)
                $('#ddw-transaction-7day').html(data.transaction7Day)
            }
        })

        //-- load block
        $.ajax({
          url:"/api/block/latest/10"
          ,dataType:"json"
          ,success: function(data){
            let html = '';
            for(x in data){
              html+= `<li class="list-separated-item">
                          <div class="row align-items-center">
                            <div class="col" style="overflow: hidden;text-overflow: ellipsis;white-space: nowrap;">
                              <div>
                                <a href="/block/${data[x].hash}" class="text-inherit">${data[x].hash}</a>
                              </div>
                            </div>
                            <div class="col-auto">
                                <span class="badge badge-success">${data[x].number}</span>
                              </div>
                          </div>
                        </li>`
            }
            $('#latest-block').html(html)
          }
        })
        //-- load address
        $.ajax({
          url:"/api/address/latest/10"
          ,dataType:"json"
          ,success: function(data){
            let html = '';
            for(x in data){
              html+= `<tr>
                      <td width="1"><i class="fa fa-chrome text-muted"></i></td>
                      <td><a href="/address/${data[x].address}">${data[x].address}</a></td>
                      <td class="text-right"><span class="text-muted">${data[x].balance/100000000000000000}</span></td>
                    </tr>`
            }
            $('#latest-address').html(html)
          }
        })
        //-- load transaction
        $.ajax({
          url:"/api/tx/latest/10"
          ,dataType:"json"
          ,success: function(data){
            let html = '';
            for(x in data){
              html+= `<tr>
                          <td>
                            <span class="text-muted">
                              <a href="/block/${data[x].blockNumber}" class="text-inherit">
                                ${data[x].blockNumber}
                              </a>
                            </span>
                          </td>
                          <td><a href="/address/${data[x].fromAddress}" class="text-inherit">${data[x].fromAddress}</a></td>
                          <td>
                            <a href="/address/${data[x].toAddress}" class="text-inherit">${data[x].toAddress}</a>
                          </td>
                          <td>
                            ${data[x].value/100000000000000000}
                          </td>
                          <td>
                            ${DateFormat.format(new Date(data[x].timestamp * 1000),"yyyy-MM-dd hh:mm:ss")}
                          </td>
                          <td>
                            <span class="status-icon bg-success"></span> SUCCESS
                          </td>
                        </tr>`
            }
            $('#latest-transaction').html(html)
          }
        })
      })
    })
  </script>
</html>